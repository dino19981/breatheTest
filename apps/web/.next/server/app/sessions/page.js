(()=>{var e={};e.id=898,e.ids=[898],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4809:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(61284).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/artem.stepanov/breatheTest/apps/web/app/sessions/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/artem.stepanov/breatheTest/apps/web/app/sessions/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13681:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=t(56840),r=t(25303),l=t(88975),n=t.n(l),d=t(38464),i={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);t.d(a,i);let o={children:["",{children:["sessions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4809)),"/Users/artem.stepanov/breatheTest/apps/web/app/sessions/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,90914))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,50537)),"/Users/artem.stepanov/breatheTest/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,78702)),"/Users/artem.stepanov/breatheTest/apps/web/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69696,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,89713,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,90914))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/artem.stepanov/breatheTest/apps/web/app/sessions/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/sessions/page",pathname:"/sessions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35847:(e,a,t)=>{Promise.resolve().then(t.bind(t,45376))},41885:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(39538).A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},45376:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>y});var s=t(31770),r=t(60683),l=t(16835),n=t(54879),d=t(57692),i=t(74056),o=t(39538);let c=(0,o.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),x=(0,o.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var m=t(41885);let u=(0,o.A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),h=(0,o.A)("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),p=(0,o.A)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);var g=t(54387);let b=(0,o.A)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);function f({session:e,open:a,onOpenChange:t,analytics:r}){return e&&r?(0,s.jsx)(i.lG,{open:a,onOpenChange:t,children:(0,s.jsxs)(i.Cf,{className:"max-w-[calc(100%-2rem)] sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(i.c7,{children:(0,s.jsxs)(i.L3,{className:"text-2xl font-bold flex items-center gap-2",children:[(0,s.jsx)(c,{className:"w-6 h-6"}),d.Ru._({id:"y+aVQV"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,s.jsxs)("div",{className:"bg-card rounded-xl p-6 shadow-sm border border-border/50 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,s.jsx)(x,{className:"w-5 h-5 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:d.Ru._({id:"92xwm6"})})]}),(0,s.jsxs)("p",{className:"text-3xl font-bold mb-2",children:[r.breathingRate," ",(0,s.jsx)("span",{className:"text-lg text-muted-foreground",children:d.Ru._({id:"jeopAv"})})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:r.feedback.rateFeedback})]}),(0,s.jsxs)("div",{className:"bg-card rounded-xl p-6 shadow-sm border border-border/50 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,s.jsx)(m.A,{className:"w-5 h-5 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:d.Ru._({id:"NtU3Kz"})})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2 mb-3",children:[(0,s.jsx)("p",{className:"text-4xl font-bold",children:r.breathScore}),(0,s.jsx)("span",{className:"text-lg text-muted-foreground",children:"%"})]}),(0,s.jsx)("div",{className:"w-full bg-muted rounded-full h-2 mb-3",children:(0,s.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${r.breathScore}%`}})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:r.breathScore>=80?d.Ru._({id:"cajXYI"}):r.breathScore>=60?d.Ru._({id:"VOvkvX"}):d.Ru._({id:"X9i6j4"})})]}),(0,s.jsxs)("div",{className:"bg-card rounded-xl p-6 shadow-sm border border-border/50 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,s.jsx)(u,{className:"w-5 h-5 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:d.Ru._({id:"s/0xjg"})})]}),(0,s.jsxs)("p",{className:"text-xl font-medium mb-4",children:[r.patternAnalysis.suggestedPattern," ",d.Ru._({id:"9s6kna"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)(v,{label:d.Ru._({id:"2k5wZC"}),value:r.avgRatio.inhale}),(0,s.jsx)(v,{label:d.Ru._({id:"URlABS"}),value:r.avgRatio.inhaleHold}),(0,s.jsx)(v,{label:d.Ru._({id:"lqLmPT"}),value:r.avgRatio.exhale}),(0,s.jsx)(v,{label:d.Ru._({id:"8QKbVX"}),value:r.avgRatio.exhaleHold})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:r.feedback.ratioFeedback})]}),(0,s.jsxs)("div",{className:"bg-card rounded-xl p-6 shadow-sm border border-border/50 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,s.jsx)(h,{className:"w-5 h-5 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:d.Ru._({id:"K8siUB"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)(j,{label:d.Ru._({id:"JCuTaQ"}),value:r.totalBreaths}),(0,s.jsx)(j,{label:d.Ru._({id:"lkz6PL"}),value:`${r.sessionDuration}m`}),(0,s.jsx)(j,{label:d.Ru._({id:"LrT3sE"}),value:r.bestMinute+1}),(0,s.jsx)(j,{label:d.Ru._({id:"dTxtPl"}),value:`${r.regularityScore}%`})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:r.feedback.consistencyFeedback})]}),(0,s.jsxs)("div",{className:"bg-card rounded-xl p-6 shadow-sm border border-border/50 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,s.jsx)(p,{className:"w-5 h-5 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:d.Ru._({id:"O9AxPV"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(j,{label:d.Ru._({id:"Lek+XJ"}),value:`${r.modelMetrics.avgConfidence}%`}),(0,s.jsx)(j,{label:d.Ru._({id:"sKSlnN"}),value:`${r.modelMetrics.avgInferenceTime}ms`}),(0,s.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3 col-span-2",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:d.Ru._({id:"5tEAk/"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("p",{className:"text-lg font-semibold",children:[Math.round(r.modelMetrics.correctPredictions/r.modelMetrics.totalPredictions*100),"%"]}),(0,s.jsx)(g.A,{className:"w-4 h-4 text-green-500"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-card rounded-xl p-6 shadow-sm border border-border/50 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,s.jsx)(b,{className:"w-5 h-5 text-primary"})}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:d.Ru._({id:"VGT/9o"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(j,{label:d.Ru._({id:"tpuqCA"}),value:`${Math.round(r.avgRatio.totalDuration/1e3)}s`}),(0,s.jsx)(j,{label:d.Ru._({id:"SU+sZ5"}),value:Math.round(60/(r.avgRatio.totalDuration/1e3))}),(0,s.jsx)(j,{label:d.Ru._({id:"DL9vA5"}),value:`${Math.round((r.avgRatio.inhaleHold+r.avgRatio.exhaleHold)/r.avgRatio.totalDuration*100)}%`}),(0,s.jsx)(j,{label:d.Ru._({id:"ZJ0WvK"}),value:`${Math.round((r.avgRatio.inhale+r.avgRatio.exhale)/r.avgRatio.totalDuration*100)}%`})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-4",children:r.avgRatio.totalDuration>=1e4&&r.avgRatio.totalDuration<=14e3?d.Ru._({id:"m+xxW0"}):d.Ru._({id:"Pbx4W8"})})]})]})]})}):null}function v({label:e,value:a}){return(0,s.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:e}),(0,s.jsxs)("p",{className:"text-lg font-semibold",children:[Math.round(a/1e3),"s"]})]})}function j({label:e,value:a}){return(0,s.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:e}),(0,s.jsx)("p",{className:"text-lg font-semibold",children:a})]})}function y(){let e=(0,r.d4)(e=>e.sessions.sessions),[a,t]=(0,l.useState)(null),[i,o]=(0,l.useState)(!1),c=(0,r.wA)(),x=e.find(e=>e.id===a),m=x?function(e){let a=e.events.filter(e=>"prediction"===e.type);if(a.length<2)throw Error("Not enough events for analysis");let t=a[0]?.timestamp??0,s=Math.max(Math.round(((a[a.length-1]?.timestamp??0)-t)/6e4),1),r=a.length,l=a.filter(e=>e.isCorrect).length,n=a.reduce((e,a)=>e+a.confidence,0)/r,d=a.reduce((e,a)=>e+a.inferenceTime,0)/r,i={Inhale:0,Exhale:0,InhaleHold:0,ExhaleHold:0},o=null;for(let e=1;e<a.length;e++){let t=a[e-1],s=a[e],r=(s?.timestamp??0)-(t?.timestamp??0);if(r<=0||r>3e4)continue;let l=t?.predictionLabel;"Inhale"===l?(i.Inhale+=r,o="Inhale"):"Exhale"===l?(i.Exhale+=r,o="Exhale"):"Noise"===l&&("Inhale"===o?i.InhaleHold+=r:"Exhale"===o&&(i.ExhaleHold+=r))}let c={inhale:i.Inhale,exhale:i.Exhale,inhaleHold:i.InhaleHold,exhaleHold:i.ExhaleHold,totalDuration:i.Inhale+i.Exhale+i.InhaleHold+i.ExhaleHold},x=a.filter(e=>"Inhale"===e.predictionLabel||"Exhale"===e.predictionLabel).length,m=a.filter(e=>"Inhale"===e.predictionLabel||"Exhale"===e.predictionLabel).map(e=>e.timestamp),u={};for(let e of m){let a=Math.floor((e-t)/6e4);u[a]=(u[a]||0)+1}let h=Object.entries(u).reduce((e,[a,t])=>t>e.count?{minute:Number(a),count:t}:e,{minute:0,count:0}).minute,p=Object.values(u),g=p.reduce((e,a)=>e+a,0)/(p.length||1),b=Math.max(0,Math.min(100,Math.round(100-10*(Math.sqrt(p.reduce((e,a)=>e+Math.pow(a-g,2),0)/(p.length||1))||0))));return{breathingRate:Math.round(x/s||0),avgRatio:c,regularityScore:b,consistencyScore:90,totalBreaths:x,sessionDuration:s,breathScore:Math.round(l/r*100),bestMinute:h,patternAnalysis:{isCoherent:!0,isBoxBreathing:!0,is478:!1,suggestedPattern:"Box"},feedback:{rateFeedback:"Looks good",ratioFeedback:"Pattern looks stable",consistencyFeedback:"Good regularity",holdFeedback:"Hold timing reasonable"},modelMetrics:{avgConfidence:Math.round(100*n),avgInferenceTime:Math.round(1e3*d),totalPredictions:r,correctPredictions:l}}}(x):null;return(0,s.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:d.Ru._({id:"UrSrwn"})}),(0,s.jsx)("button",{onClick:()=>c((0,n.n3)()),className:"text-sm bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition",children:d.Ru._({id:"MzJlgs"})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:e.map(e=>(0,s.jsxs)("button",{onClick:()=>{t(e.id),o(!0)},className:"border rounded-xl p-4 text-left shadow hover:bg-gray-50 transition",children:[(0,s.jsxs)("p",{className:"text-lg font-semibold",children:[d.Ru._({id:"CqO9qC"})," ",new Date(e.createdAt).toLocaleString()]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.events.length," ",d.Ru._({id:"ufcUbL"})]})]},e.id))}),(0,s.jsx)(f,{session:x||null,analytics:m,open:i,onOpenChange:o})]})}},52719:(e,a,t)=>{Promise.resolve().then(t.bind(t,4809))},54387:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(39538).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74056:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>x,Es:()=>u,L3:()=>h,c7:()=>m,lG:()=>d,rr:()=>p,zM:()=>i});var s=t(31770);t(16835);var r=t(89364),l=t(93680),n=t(54176);function d({...e}){return(0,s.jsx)(r.bL,{"data-slot":"dialog",...e})}function i({...e}){return(0,s.jsx)(r.l9,{"data-slot":"dialog-trigger",...e})}function o({...e}){return(0,s.jsx)(r.ZL,{"data-slot":"dialog-portal",...e})}function c({className:e,...a}){return(0,s.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function x({className:e,children:a,...t}){return(0,s.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,s.jsx)(c,{}),(0,s.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t,children:[a,(0,s.jsxs)(r.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function u({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function h({className:e,...a}){return(0,s.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",e),...a})}function p({className:e,...a}){return(0,s.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...a})}},79551:e=>{"use strict";e.exports=require("url")}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[883,693,153],()=>t(13681));module.exports=s})();